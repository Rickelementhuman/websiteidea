<div class="full-funnel-section">
    <style>
        .full-funnel-section {
            font-family: 'Poppins', sans-serif;
            color: #000000;
            overflow-x: hidden;
            position: relative;
            width: 100%;
            height: 500vh; /* Define total height for the section */
        }

        .funnel-container-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            overflow: hidden;
        }

        .full-funnel-section * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --dark-bg: #1a1a2e;
            --card-bg: #2a2a3e;
            --border-color: #3a3a4e;
            --white: #ffffff;
            --attention: #F9BE00;
            --emotion: #FF2198;
            --memory: #10A8B7;
            --brand-uplift: #54E42B;
            --awareness-blue: #13202F;
            --interest-blue: #1e2f42;
            --desire-blue: #2a3f55;
            --action-blue: #365068;
        }

        .funnel-section {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .funnel-container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .funnel {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .funnel-stage {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.8s ease;
            opacity: 1;
            transform: translateY(0);
        }

        .funnel-stage.active {
            opacity: 1;
            transform: translateY(0);
        }

        .funnel-stage.visible {
            opacity: 0.3;
        }

        .funnel-stage.inactive {
            opacity: 0.1;
        }

        .stage-content {
            display: flex;
            align-items: center;
            justify-content: space-between;
            width: 100%;
            max-width: 1400px;
            padding: 0 40px;
            height: 100%;
        }

        .stage-funnel {
            flex: 1;
            height: 100%;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .funnel-shape {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .main-container {
            display: flex;
            min-height: 100vh;
            position: relative;
            width: 100%;
            height: 100%;
        }

        .funnel-sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 50%;
            height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10;
        }

        .funnel-container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            padding: 40px;
        }

        .funnel-shape {
            position: relative;
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 0;
        }

        .funnel-awarenss {
            width: 100%;
            height: 20vh;
            background: var(--awareness-blue);
            clip-path: polygon(10% 0%, 90% 0%, 85% 100%, 15% 100%);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 0;
            transition: none;
        }

        .funnel-interest {
            width: 85%;
            height: 20vh;
            background: var(--interest-blue);
            clip-path: polygon(15% 0%, 85% 0%, 80% 100%, 20% 100%);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 0;
            transition: none;
        }

        .funnel-desire {
            width: 70%;
            height: 20vh;
            background: var(--desire-blue);
            clip-path: polygon(20% 0%, 80% 0%, 75% 100%, 25% 100%);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 0;
            transition: none;
        }

        .funnel-action {
            width: 55%;
            height: 20vh;
            background: var(--action-blue);
            clip-path: polygon(25% 0%, 75% 0%, 70% 100%, 30% 100%);
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            font-weight: 700;
            color: var(--white);
            margin-bottom: 0;
            transition: none;
        }

        .funnel-stage.active {
            transform: scale(1.05);
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.1);
            transition: none;
        }

        .content-side {
            margin-left: 50%;
            width: 50%;
            position: relative;
            height: 100%;
        }

        .stage-details-container {
            position: relative;
            width: 100%;
            height: 100%;
        }

        .stage-details-section {
            min-height: 100vh;
            padding: 80px 60px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: flex-start;
            position: fixed;
            top: 0;
            right: 0;
            width: 50%;
            height: 100vh;
            opacity: 0; /* Hidden by default */
            transition: opacity 0.3s ease;
        }



        .stage-title {
            font-size: 3rem;
            font-weight: 700;
            margin-bottom: 20px;
            color: #000000;
            width: 100%;
            min-height: 4rem;
            display: flex;
            align-items: center;
        }

        .stage-description {
            font-size: 1.2rem;
            line-height: 1.6;
            margin-bottom: 30px;
            color: #333333;
            width: 100%;
            min-height: 4rem;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
            width: 100%;
            min-height: 200px;
        }

        .metric-item {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px;
            transition: all 0.3s ease;
        }

        .metric-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .metric-title {
            font-size: 1.1rem;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .metric-description {
            font-size: 0.9rem;
            color: #666666;
            line-height: 1.4;
        }

        .metric-attention { border-left: 4px solid var(--attention); }
        .metric-emotion { border-left: 4px solid var(--emotion); }
        .metric-memory { border-left: 4px solid var(--memory); }
        .metric-brand-uplift { border-left: 4px solid var(--brand-uplift); }

        .methodology-legend {
            position: fixed;
            top: 40px;
            right: 40px;
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #dddddd;
            border-radius: 12px;
            padding: 20px;
            backdrop-filter: blur(10px);
            z-index: 1000;
            opacity: 0; /* Hidden by default */
            transition: opacity 0.3s ease;
        }



        .legend-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            color: #000000;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 10px;
        }

        .legend-text {
            font-size: 0.9rem;
            color: #333333;
        }

        .scroll-indicator {
            position: fixed;
            bottom: 40px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(255, 255, 255, 0.9);
            border: 1px solid #dddddd;
            border-radius: 25px;
            padding: 15px 30px;
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: flex;
            align-items: center;
            gap: 10px;
            color: #000000;
            font-size: 0.9rem;
            opacity: 0; /* Hidden by default */
            transition: opacity 0.3s ease;
        }



        .scroll-arrow {
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% {
                transform: translateY(0);
            }
            40% {
                transform: translateY(-5px);
            }
            60% {
                transform: translateY(-3px);
            }
        }

        /* Tablet Styles */
        @media (max-width: 1024px) {
            .full-funnel-section {
                height: 400vh; /* Shorter on tablets */
            }

            .stage-title {
                font-size: 2.5rem;
            }

            .stage-description {
                font-size: 1.1rem;
            }

            .funnel-awarenss,
            .funnel-interest,
            .funnel-desire,
            .funnel-action {
                font-size: 1.8rem;
            }

            .metrics-grid {
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
            }

            .stage-details-section {
                padding: 60px 40px;
            }
        }

        /* Mobile Styles */
        @media (max-width: 768px) {
            .full-funnel-section {
                height: 300vh; /* Much shorter on mobile */
            }

            .funnel-container-wrapper {
                height: 100%;
            }

            .main-container {
                flex-direction: column;
            }

            .funnel-sidebar {
                position: relative;
                width: 100%;
                height: 60vh;
                margin-bottom: 20px;
            }



            .content-side {
                margin-left: 0;
                width: 100%;
                position: relative;
            }

            .stage-details-section {
                display: flex; /* Always visible on mobile */
                position: relative;
                width: 100%;
                padding: 40px 20px;
                min-height: 40vh;
                transform: translateX(0); /* No slide animation on mobile */
            }



            .stage-title {
                font-size: 2rem;
                margin-bottom: 15px;
            }

            .stage-description {
                font-size: 1rem;
                margin-bottom: 20px;
            }

            .funnel-awarenss,
            .funnel-interest,
            .funnel-desire,
            .funnel-action {
                font-size: 1.5rem;
                height: 12vh;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
                gap: 15px;
                margin-top: 20px;
            }

            .methodology-legend {
                position: relative;
                top: auto;
                right: auto;
                margin: 20px;
            }



            .scroll-indicator {
                position: relative;
                bottom: auto;
                left: auto;
                transform: none;
                margin: 20px auto;
            }



            .funnel-container {
                padding: 20px;
            }
        }

        /* Small Mobile Styles */
        @media (max-width: 480px) {
            .full-funnel-section {
                height: 250vh; /* Even shorter on small mobile */
            }

            .funnel-container-wrapper {
                height: 100%;
            }

            .funnel-sidebar {
                height: 50vh;
            }

            .stage-title {
                font-size: 1.8rem;
            }

            .stage-description {
                font-size: 0.9rem;
            }

            .funnel-awarenss,
            .funnel-interest,
            .funnel-desire,
            .funnel-action {
                font-size: 1.2rem;
                height: 10vh;
            }

            .stage-details-section {
                padding: 30px 15px;
                min-height: 35vh;
            }

            .methodology-legend {
                margin: 15px;
                padding: 15px;
            }

            .legend-title {
                font-size: 1rem;
            }

            .legend-text {
                font-size: 0.8rem;
            }

            .metric-item {
                padding: 15px;
            }

            .metric-title {
                font-size: 1rem;
            }

            .metric-description {
                font-size: 0.8rem;
            }
        }
    </style>

    <div class="funnel-container-wrapper">
        <div class="funnel-section">
            <div class="methodology-legend">
                <div class="legend-title">Methodology</div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--attention);"></div>
                    <div class="legend-text">Attention</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--emotion);"></div>
                    <div class="legend-text">Emotion</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--memory);"></div>
                    <div class="legend-text">Memory</div>
                </div>
                <div class="legend-item">
                    <div class="legend-color" style="background: var(--brand-uplift);"></div>
                    <div class="legend-text">Brand Uplift</div>
                </div>
            </div>

            <div class="scroll-indicator">
                <span>Scroll to explore the funnel</span>
                <span class="scroll-arrow">â†“</span>
            </div>

            <div class="main-container">
                <!-- Left Side - Funnel -->
                <div class="funnel-sidebar">
                    <div class="funnel-container">
                        <div class="funnel-shape">
                            <div class="funnel-awarenss funnel-stage" data-stage="awareness">AWARENESS</div>
                            <div class="funnel-interest funnel-stage" data-stage="interest">INTEREST</div>
                            <div class="funnel-desire funnel-stage" data-stage="desire">DESIRE</div>
                            <div class="funnel-action funnel-stage" data-stage="action">ACTION</div>
                        </div>
                    </div>
                </div>

                <!-- Right Side - Content -->
                <div class="content-side">
                    <div class="stage-details-container">
                        <div class="stage-details-section" id="dynamic-content">
                            <div class="stage-title" id="dynamic-title">Awareness</div>
                            <div class="stage-description" id="dynamic-description">
                                The first stage of the customer journey where potential customers become aware of your brand and products. This is where initial impressions are formed and brand recognition begins.
                            </div>
                            <div class="metrics-grid" id="dynamic-metrics">
                                <div class="metric-item metric-attention">
                                    <div class="metric-title">Attention in Feed</div>
                                    <div class="metric-description">Measures how well content captures attention in social media feeds and digital environments.</div>
                                </div>
                                <div class="metric-item metric-brand-uplift">
                                    <div class="metric-title">Brand Recall</div>
                                    <div class="metric-description">Assesses the ability of consumers to remember and recognize your brand after exposure.</div>
                                </div>
                                <div class="metric-item metric-brand-uplift">
                                    <div class="metric-title">Top of Mind Awareness</div>
                                    <div class="metric-description">Measures when your brand is the first that comes to mind in a category.</div>
                                </div>
                                <div class="metric-item metric-brand-uplift">
                                    <div class="metric-title">Unaided Awareness</div>
                                    <div class="metric-description">Tests spontaneous brand recognition without prompting or assistance.</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const section = document.querySelector('.full-funnel-section');
            const dynamicContent = document.getElementById('dynamic-content');
            const dynamicTitle = document.getElementById('dynamic-title');
            const dynamicDescription = document.getElementById('dynamic-description');
            const dynamicMetrics = document.getElementById('dynamic-metrics');
            const funnelStages = document.querySelectorAll('.funnel-stage');
            const scrollIndicator = document.querySelector('.scroll-indicator');
            const funnelSidebar = document.querySelector('.funnel-sidebar');
            const methodologyLegend = document.querySelector('.methodology-legend');

            // Check if mobile
            let isMobile = window.innerWidth <= 768;

            // Content data for each stage
            const stageData = [
                {
                    title: 'Awareness',
                    description: 'The first stage of the customer journey where potential customers become aware of your brand and products. This is where initial impressions are formed and brand recognition begins.',
                    metrics: [
                        { title: 'Attention in Feed', description: 'Measures how well content captures attention in social media feeds and digital environments.', type: 'attention' },
                        { title: 'Brand Recall', description: 'Assesses the ability of consumers to remember and recognize your brand after exposure.', type: 'brand-uplift' },
                        { title: 'Top of Mind Awareness', description: 'Measures when your brand is the first that comes to mind in a category.', type: 'brand-uplift' },
                        { title: 'Unaided Awareness', description: 'Tests spontaneous brand recognition without prompting or assistance.', type: 'brand-uplift' }
                    ]
                },
                {
                    title: 'Interest',
                    description: 'The stage where potential customers develop curiosity and begin to actively seek more information about your products or services.',
                    metrics: [
                        { title: 'Emotional Response', description: 'Measures the emotional impact and connection consumers feel with your brand content.', type: 'emotion' },
                        { title: 'Key Moments', description: 'Identifies the most impactful moments that drive engagement and interest in your content.', type: 'emotion' }
                    ]
                },
                {
                    title: 'Desire',
                    description: 'The stage where potential customers develop a strong preference for your brand and begin to see it as the solution to their needs.',
                    metrics: [
                        { title: 'Implicit Brand Associations', description: 'Measures subconscious brand connections and associations formed through content exposure.', type: 'memory' },
                        { title: 'Explicit Brand Associations', description: 'Tests conscious brand connections and attributes that consumers actively associate with your brand.', type: 'attention' },
                        { title: 'Brand Positivity', description: 'Measures the positive sentiment and favorable attitudes toward your brand.', type: 'brand-uplift' }
                    ]
                },
                {
                    title: 'Action',
                    description: 'The final stage where potential customers take the desired action, such as making a purchase, signing up, or converting in some way.',
                    metrics: [
                        { title: 'Consideration', description: 'Measures the likelihood of consumers considering your brand for their next purchase decision.', type: 'brand-uplift' },
                        { title: 'Purchase Intent', description: 'Assesses the probability of consumers making a purchase from your brand.', type: 'brand-uplift' },
                        { title: 'Recommend Intent', description: 'Measures the likelihood of consumers recommending your brand to others.', type: 'brand-uplift' }
                    ]
                }
            ];

            function updateContent() {
                const rect = section.getBoundingClientRect();
                const sectionTop = rect.top + window.scrollY;
                const sectionBottom = sectionTop + section.offsetHeight;
                const scrollPosition = window.scrollY;
                const windowHeight = window.innerHeight;

                // Define animation range within the section
                const animationStart = sectionTop + windowHeight * 0.2; // Start animation 20% into section
                const animationEnd = sectionBottom - windowHeight * 0.2; // End animation before section ends
                
                const isInAnimationRange = scrollPosition >= animationStart && scrollPosition <= animationEnd;
                const isBeforeAnimation = scrollPosition < animationStart;
                const isAfterAnimation = scrollPosition > animationEnd;

                // Mobile behavior
                if (isMobile) {
                    // Show content on mobile when in view
                    const mobileInView = scrollPosition >= sectionTop && scrollPosition < sectionBottom;
                    if (mobileInView) {
                        dynamicContent.style.opacity = '1';
                        methodologyLegend.style.opacity = '1';
                        scrollIndicator.style.opacity = '1';
                    } else {
                        dynamicContent.style.opacity = '0';
                        methodologyLegend.style.opacity = '0';
                        scrollIndicator.style.opacity = '0';
                    }
                } else {
                    // Desktop behavior - pure opacity animation
                    if (isInAnimationRange) {
                        // Animation phase - show content and play animations
                        dynamicContent.style.opacity = '1';
                        methodologyLegend.style.opacity = '1';
                        scrollIndicator.style.opacity = '1';
                        
                    } else if (isAfterAnimation) {
                        // After animation - hide content
                        dynamicContent.style.opacity = '0';
                        methodologyLegend.style.opacity = '0';
                        scrollIndicator.style.opacity = '0';
                        
                    } else {
                        // Before animation - hide content
                        dynamicContent.style.opacity = '0';
                        methodologyLegend.style.opacity = '0';
                        scrollIndicator.style.opacity = '0';
                    }
                }

                // Update content when in animation range (desktop) or mobile
                const shouldUpdateContent = (isInAnimationRange && !isMobile) || isMobile;
                
                if (shouldUpdateContent) {
                    // Calculate scroll progress within the animation range
                    const animationProgress = isMobile ? 
                        Math.max(0, Math.min(1, (scrollPosition - sectionTop) / (section.offsetHeight - windowHeight * 0.5))) :
                        Math.max(0, Math.min(1, (scrollPosition - animationStart) / (animationEnd - animationStart)));
                    
                    const currentSection = Math.floor(animationProgress * stageData.length);
                    const stageIndex = Math.min(Math.max(currentSection, 0), stageData.length - 1);
                    const stage = stageData[stageIndex];
                    
                    // Update content smoothly
                    dynamicTitle.textContent = stage.title;
                    dynamicDescription.textContent = stage.description;
                    
                    // Update metrics
                    dynamicMetrics.innerHTML = stage.metrics.map(metric => `
                        <div class="metric-item metric-${metric.type}">
                            <div class="metric-title">${metric.title}</div>
                            <div class="metric-description">${metric.description}</div>
                        </div>
                    `).join('');
                    
                    // Calculate animation progress within current stage (desktop only)
                    if (!isMobile && isInAnimationRange) {
                        const stageProgress = (animationProgress * stageData.length) - stageIndex;
                        
                        // Enhanced slide animation with opacity fade
                        let transformX;
                        let opacity;
                        
                        if (stageProgress < 0.5) {
                            // First half of stage - slide in from right with fade in
                            const slideInProgress = Math.max(0, Math.min(1, stageProgress * 2));
                            transformX = 50 - (slideInProgress * 50);
                            opacity = Math.max(0.3, slideInProgress);
                        } else {
                            // Second half of stage - slide out to left with fade out
                            const slideOutProgress = Math.max(0, Math.min(1, (stageProgress - 0.5) * 2));
                            transformX = 0 - (slideOutProgress * 50);
                            opacity = Math.max(0.3, 1 - slideOutProgress);
                        }
                        
                        // Prevent movement at the very end for the last stage
                        if (stageIndex === stageData.length - 1 && animationProgress >= 0.9) {
                            transformX = 0;
                            opacity = 1;
                        }
                        
                        // Apply the calculated values
                        dynamicContent.style.opacity = opacity;
                        dynamicContent.style.transform = `translateX(${transformX}px)`;
                    }
                    
                    // Update funnel stages
                    funnelStages.forEach((stage, index) => {
                        stage.classList.remove('active');
                        if (index === stageIndex) {
                            stage.classList.add('active');
                        }
                    });

                    // Hide scroll indicator when reaching the last stage
                    if (stageIndex >= stageData.length - 1) {
                        scrollIndicator.style.opacity = '0.5';
                    } else {
                        scrollIndicator.style.opacity = '1';
                    }
                }
            }

            // Initial setup
            updateContent();
            
            // Listen for scroll events
            window.addEventListener('scroll', updateContent);
            
            // Update on resize
            window.addEventListener('resize', () => {
                // Re-check if mobile on resize
                isMobile = window.innerWidth <= 768;
                updateContent();
            });
        });
    </script>
</div> 